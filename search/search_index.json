{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Nova2FA Documentation Welcome to Nova2FA - a flexible, production-ready Two-Factor Authentication (2FA) package for Django applications. What is Nova2FA? Nova2FA provides a complete 2FA solution for Django projects with: \ud83d\udd10 Multiple authentication methods (TOTP, Email OTP, Backup Codes) \ud83c\udfa8 Completely customizable unstyled templates \ud83d\udd0c Pluggable architecture for custom methods \ud83d\udee1\ufe0f Production-ready security features \ud83d\ude80 Easy integration with existing Django projects Quick Links Installation Guide Quick Start Tutorial Configuration Reference Security Guide \u2b50 New in v1.1.0 Customization Guide API Reference Why Nova2FA? Unlike other 2FA packages, Nova2FA is designed from the ground up to be: Flexible : Pluggable architecture lets you add custom authentication methods Unstyled : Bring your own design system - no forced styling Simple : Minimal configuration required to get started Powerful : Advanced features for production use Maintained : Active development and support Features at a Glance Authentication Methods TOTP (Time-based OTP) : Works with Google Authenticator, Authy, Microsoft Authenticator, etc. Email OTP : Receive codes via email Backup Codes : Recovery codes for emergency access Extensible : Add SMS, push notifications, hardware keys, etc. Security Features Encrypted TOTP secrets (v1.1.0+) Hashed backup codes (v1.1.0+) Account lockout after failed attempts (v1.1.0+) Configurable verification windows Built-in rate limiting Session-based verification Path-based access control Backup codes with usage tracking Developer Experience Zero-friction installation Comprehensive documentation Example project included Minimal dependencies Django 4.2+ compatible Community GitHub : brandnova/Nova2FA Issues : Report bugs or request features PyPI : nova2fa on PyPI License Nova2FA is released under the BSD 3-Clause License.","title":"Home"},{"location":"#nova2fa-documentation","text":"Welcome to Nova2FA - a flexible, production-ready Two-Factor Authentication (2FA) package for Django applications.","title":"Nova2FA Documentation"},{"location":"#what-is-nova2fa","text":"Nova2FA provides a complete 2FA solution for Django projects with: \ud83d\udd10 Multiple authentication methods (TOTP, Email OTP, Backup Codes) \ud83c\udfa8 Completely customizable unstyled templates \ud83d\udd0c Pluggable architecture for custom methods \ud83d\udee1\ufe0f Production-ready security features \ud83d\ude80 Easy integration with existing Django projects","title":"What is Nova2FA?"},{"location":"#quick-links","text":"Installation Guide Quick Start Tutorial Configuration Reference Security Guide \u2b50 New in v1.1.0 Customization Guide API Reference","title":"Quick Links"},{"location":"#why-nova2fa","text":"Unlike other 2FA packages, Nova2FA is designed from the ground up to be: Flexible : Pluggable architecture lets you add custom authentication methods Unstyled : Bring your own design system - no forced styling Simple : Minimal configuration required to get started Powerful : Advanced features for production use Maintained : Active development and support","title":"Why Nova2FA?"},{"location":"#features-at-a-glance","text":"","title":"Features at a Glance"},{"location":"#authentication-methods","text":"TOTP (Time-based OTP) : Works with Google Authenticator, Authy, Microsoft Authenticator, etc. Email OTP : Receive codes via email Backup Codes : Recovery codes for emergency access Extensible : Add SMS, push notifications, hardware keys, etc.","title":"Authentication Methods"},{"location":"#security-features","text":"Encrypted TOTP secrets (v1.1.0+) Hashed backup codes (v1.1.0+) Account lockout after failed attempts (v1.1.0+) Configurable verification windows Built-in rate limiting Session-based verification Path-based access control Backup codes with usage tracking","title":"Security Features"},{"location":"#developer-experience","text":"Zero-friction installation Comprehensive documentation Example project included Minimal dependencies Django 4.2+ compatible","title":"Developer Experience"},{"location":"#community","text":"GitHub : brandnova/Nova2FA Issues : Report bugs or request features PyPI : nova2fa on PyPI","title":"Community"},{"location":"#license","text":"Nova2FA is released under the BSD 3-Clause License.","title":"License"},{"location":"api-reference/","text":"API Reference This page documents Nova2FA's Python API for programmatic usage. Models UserTwoFactorSettings Stores user 2FA configuration and state. from nova2fa.models import UserTwoFactorSettings # Get user's settings settings = UserTwoFactorSettings.objects.get(user=user) Fields Field Type Description user ForeignKey Reference to Django user is_enabled BooleanField Whether 2FA is enabled method CharField Active method ('email' or 'totp') totp_secret CharField TOTP secret key (encrypted in v1.1.0+) backup_codes JSONField List of backup codes (hashed in v1.1.0+) used_backup_codes JSONField List of used backup codes failed_attempts IntegerField Failed verification attempts (v1.1.0+) locked_until DateTimeField Account lockout expiration (v1.1.0+) last_verified DateTimeField Last verification timestamp created_at DateTimeField When settings were created updated_at DateTimeField Last update timestamp Methods needs_verification() Check if user needs to verify 2FA. if settings.needs_verification(): # Redirect to verification redirect('nova2fa:verify') Returns: bool update_last_verified() Update the last verified timestamp to now. settings.update_last_verified() Returns: None verify_backup_code(code) Verify a backup code and mark it as used. if settings.verify_backup_code('ABCD1234'): print(\"Valid backup code!\") Parameters: code (str): The backup code to verify Returns: bool - True if valid, False otherwise get_available_backup_codes() Get list of unused backup codes. codes = settings.get_available_backup_codes() print(f\"You have {len(codes)} codes remaining\") Returns: list of strings has_available_backup_codes() Check if user has any unused backup codes. if not settings.has_available_backup_codes(): # Warn user to generate new codes pass Returns: bool EmailOTP Stores email one-time passwords. from nova2fa.models import EmailOTP # Get latest OTP for user otp = EmailOTP.objects.filter(user=user).latest('created_at') Fields Field Type Description user ForeignKey Reference to Django user code CharField The 6-digit OTP code created_at DateTimeField When OTP was created expires_at DateTimeField When OTP expires is_used BooleanField Whether OTP has been used Methods is_valid() Check if OTP is still valid (not used and not expired). if otp.is_valid(): # OTP can be used pass Returns: bool mark_as_used() Mark the OTP as used. otp.mark_as_used() Returns: None Registry register_method() Register a custom 2FA method. from nova2fa.registry import register_method from myapp.methods import SMSMethod register_method('sms', SMSMethod()) Parameters: code (str): Unique identifier for the method handler (Base2FAMethod): Instance of method handler Returns: None get_method() Get a registered 2FA method. from nova2fa.registry import get_method method = get_method('email') if method: method.send(user) Parameters: code (str): Method identifier Returns: Base2FAMethod instance or None get_enabled_methods() Get all enabled methods based on settings. from nova2fa.registry import get_enabled_methods methods = get_enabled_methods() for code, handler in methods.items(): print(f\"{code}: {handler.verbose_name}\") Returns: dict of {code: handler} Methods Base2FAMethod Base class for all 2FA methods. from nova2fa.methods.base import Base2FAMethod class CustomMethod(Base2FAMethod): name = \"custom\" verbose_name = \"Custom Method\" def send(self, user): # Implementation return True def verify(self, user, token): # Implementation return True Required Attributes name (str): Unique method identifier verbose_name (str): Human-readable name Required Methods send(user) Send the 2FA token to the user. Parameters: user : Django user instance Returns: bool - True if sent successfully verify(user, token) Verify the provided token. Parameters: user : Django user instance token (str): Token to verify Returns: bool - True if valid Optional Methods setup(user) Perform setup for this method (e.g., generate secret). Parameters: user : Django user instance Returns: dict - Setup data is_configured(user) Check if method is configured for user. Parameters: user : Django user instance Returns: bool EmailOTPMethod Email-based OTP method. from nova2fa.methods import EmailOTPMethod method = EmailOTPMethod() method.send(user) # Sends OTP via email method.verify(user, '123456') # Verifies code TOTPMethod Time-based OTP method (authenticator apps). from nova2fa.methods import TOTPMethod method = TOTPMethod() setup_data = method.setup(user) # Returns QR code path, secret method.verify(user, '123456') # Verifies TOTP code BackupCodesMethod Backup codes method. from nova2fa.methods import BackupCodesMethod method = BackupCodesMethod() setup_data = method.setup(user) # Generates new codes method.verify(user, 'ABCD1234') # Verifies backup code Utilities Checking 2FA Status from nova2fa.models import UserTwoFactorSettings def user_has_2fa(user): \"\"\"Check if user has 2FA enabled.\"\"\" try: settings = UserTwoFactorSettings.objects.get(user=user) return settings.is_enabled except UserTwoFactorSettings.DoesNotExist: return False Programmatically Enabling 2FA from nova2fa.models import UserTwoFactorSettings from nova2fa.methods import EmailOTPMethod, BackupCodesMethod def enable_email_2fa(user): \"\"\"Enable email 2FA for a user.\"\"\" settings, created = UserTwoFactorSettings.objects.get_or_create(user=user) # Generate backup codes backup_method = BackupCodesMethod() backup_data = backup_method.setup(user) # Enable 2FA settings.is_enabled = True settings.method = 'email' settings.backup_codes = backup_data['codes'] settings.save() return settings Getting 2FA Statistics from nova2fa.models import UserTwoFactorSettings from django.db.models import Count def get_2fa_stats(): \"\"\"Get 2FA adoption statistics.\"\"\" total_users = UserTwoFactorSettings.objects.count() enabled = UserTwoFactorSettings.objects.filter(is_enabled=True).count() methods = UserTwoFactorSettings.objects.filter( is_enabled=True ).values('method').annotate(count=Count('method')) return { 'total_users': total_users, 'enabled': enabled, 'adoption_rate': (enabled / total_users * 100) if total_users > 0 else 0, 'methods': dict((m['method'], m['count']) for m in methods) } Session Management from django.utils import timezone def mark_2fa_verified(request): \"\"\"Mark session as 2FA verified.\"\"\" request.session['nova2fa_verified_at'] = timezone.now().isoformat() request.session.save() def clear_2fa_verification(request): \"\"\"Clear 2FA verification from session.\"\"\" if 'nova2fa_verified_at' in request.session: del request.session['nova2fa_verified_at'] request.session.save() Middleware Nova2FAMiddleware The middleware automatically enforces 2FA verification. Configuration: # settings.py MIDDLEWARE = [ # ... 'nova2fa.middleware.Nova2FAMiddleware', ] Behavior: Checks if user is authenticated Checks if path is exempt Checks if user has 2FA enabled Checks if session is verified Redirects to verification if needed Signals Nova2FA creates UserTwoFactorSettings automatically when users are created: # In your app from django.contrib.auth import get_user_model User = get_user_model() user = User.objects.create_user('john', 'john@example.com', 'password') # Nova2FA automatically creates settings assert hasattr(user, 'nova2fa_settings') Example: Custom Dashboard # views.py from django.contrib.auth.decorators import login_required from django.shortcuts import render from nova2fa.models import UserTwoFactorSettings, EmailOTP from django.utils import timezone from datetime import timedelta @login_required def security_dashboard(request): \"\"\"Custom security dashboard with 2FA info.\"\"\" try: settings = UserTwoFactorSettings.objects.get(user=request.user) has_2fa = settings.is_enabled method = settings.get_method_display() if has_2fa else None # Get recent OTP attempts recent_otps = EmailOTP.objects.filter( user=request.user, created_at__gte=timezone.now() - timedelta(days=7) ).count() # Check backup codes backup_codes_remaining = len(settings.get_available_backup_codes()) except UserTwoFactorSettings.DoesNotExist: has_2fa = False method = None recent_otps = 0 backup_codes_remaining = 0 context = { 'has_2fa': has_2fa, 'method': method, 'recent_otps': recent_otps, 'backup_codes_remaining': backup_codes_remaining, } return render(request, 'dashboard.html', context) Next Steps Review Customization Guide for template customization Check GitHub Repository for examples","title":"API Reference"},{"location":"api-reference/#api-reference","text":"This page documents Nova2FA's Python API for programmatic usage.","title":"API Reference"},{"location":"api-reference/#models","text":"","title":"Models"},{"location":"api-reference/#usertwofactorsettings","text":"Stores user 2FA configuration and state. from nova2fa.models import UserTwoFactorSettings # Get user's settings settings = UserTwoFactorSettings.objects.get(user=user)","title":"UserTwoFactorSettings"},{"location":"api-reference/#fields","text":"Field Type Description user ForeignKey Reference to Django user is_enabled BooleanField Whether 2FA is enabled method CharField Active method ('email' or 'totp') totp_secret CharField TOTP secret key (encrypted in v1.1.0+) backup_codes JSONField List of backup codes (hashed in v1.1.0+) used_backup_codes JSONField List of used backup codes failed_attempts IntegerField Failed verification attempts (v1.1.0+) locked_until DateTimeField Account lockout expiration (v1.1.0+) last_verified DateTimeField Last verification timestamp created_at DateTimeField When settings were created updated_at DateTimeField Last update timestamp","title":"Fields"},{"location":"api-reference/#methods","text":"needs_verification() Check if user needs to verify 2FA. if settings.needs_verification(): # Redirect to verification redirect('nova2fa:verify') Returns: bool update_last_verified() Update the last verified timestamp to now. settings.update_last_verified() Returns: None verify_backup_code(code) Verify a backup code and mark it as used. if settings.verify_backup_code('ABCD1234'): print(\"Valid backup code!\") Parameters: code (str): The backup code to verify Returns: bool - True if valid, False otherwise get_available_backup_codes() Get list of unused backup codes. codes = settings.get_available_backup_codes() print(f\"You have {len(codes)} codes remaining\") Returns: list of strings has_available_backup_codes() Check if user has any unused backup codes. if not settings.has_available_backup_codes(): # Warn user to generate new codes pass Returns: bool","title":"Methods"},{"location":"api-reference/#emailotp","text":"Stores email one-time passwords. from nova2fa.models import EmailOTP # Get latest OTP for user otp = EmailOTP.objects.filter(user=user).latest('created_at')","title":"EmailOTP"},{"location":"api-reference/#fields_1","text":"Field Type Description user ForeignKey Reference to Django user code CharField The 6-digit OTP code created_at DateTimeField When OTP was created expires_at DateTimeField When OTP expires is_used BooleanField Whether OTP has been used","title":"Fields"},{"location":"api-reference/#methods_1","text":"is_valid() Check if OTP is still valid (not used and not expired). if otp.is_valid(): # OTP can be used pass Returns: bool mark_as_used() Mark the OTP as used. otp.mark_as_used() Returns: None","title":"Methods"},{"location":"api-reference/#registry","text":"","title":"Registry"},{"location":"api-reference/#register_method","text":"Register a custom 2FA method. from nova2fa.registry import register_method from myapp.methods import SMSMethod register_method('sms', SMSMethod()) Parameters: code (str): Unique identifier for the method handler (Base2FAMethod): Instance of method handler Returns: None","title":"register_method()"},{"location":"api-reference/#get_method","text":"Get a registered 2FA method. from nova2fa.registry import get_method method = get_method('email') if method: method.send(user) Parameters: code (str): Method identifier Returns: Base2FAMethod instance or None","title":"get_method()"},{"location":"api-reference/#get_enabled_methods","text":"Get all enabled methods based on settings. from nova2fa.registry import get_enabled_methods methods = get_enabled_methods() for code, handler in methods.items(): print(f\"{code}: {handler.verbose_name}\") Returns: dict of {code: handler}","title":"get_enabled_methods()"},{"location":"api-reference/#methods_2","text":"","title":"Methods"},{"location":"api-reference/#base2famethod","text":"Base class for all 2FA methods. from nova2fa.methods.base import Base2FAMethod class CustomMethod(Base2FAMethod): name = \"custom\" verbose_name = \"Custom Method\" def send(self, user): # Implementation return True def verify(self, user, token): # Implementation return True","title":"Base2FAMethod"},{"location":"api-reference/#required-attributes","text":"name (str): Unique method identifier verbose_name (str): Human-readable name","title":"Required Attributes"},{"location":"api-reference/#required-methods","text":"send(user) Send the 2FA token to the user. Parameters: user : Django user instance Returns: bool - True if sent successfully verify(user, token) Verify the provided token. Parameters: user : Django user instance token (str): Token to verify Returns: bool - True if valid","title":"Required Methods"},{"location":"api-reference/#optional-methods","text":"setup(user) Perform setup for this method (e.g., generate secret). Parameters: user : Django user instance Returns: dict - Setup data is_configured(user) Check if method is configured for user. Parameters: user : Django user instance Returns: bool","title":"Optional Methods"},{"location":"api-reference/#emailotpmethod","text":"Email-based OTP method. from nova2fa.methods import EmailOTPMethod method = EmailOTPMethod() method.send(user) # Sends OTP via email method.verify(user, '123456') # Verifies code","title":"EmailOTPMethod"},{"location":"api-reference/#totpmethod","text":"Time-based OTP method (authenticator apps). from nova2fa.methods import TOTPMethod method = TOTPMethod() setup_data = method.setup(user) # Returns QR code path, secret method.verify(user, '123456') # Verifies TOTP code","title":"TOTPMethod"},{"location":"api-reference/#backupcodesmethod","text":"Backup codes method. from nova2fa.methods import BackupCodesMethod method = BackupCodesMethod() setup_data = method.setup(user) # Generates new codes method.verify(user, 'ABCD1234') # Verifies backup code","title":"BackupCodesMethod"},{"location":"api-reference/#utilities","text":"","title":"Utilities"},{"location":"api-reference/#checking-2fa-status","text":"from nova2fa.models import UserTwoFactorSettings def user_has_2fa(user): \"\"\"Check if user has 2FA enabled.\"\"\" try: settings = UserTwoFactorSettings.objects.get(user=user) return settings.is_enabled except UserTwoFactorSettings.DoesNotExist: return False","title":"Checking 2FA Status"},{"location":"api-reference/#programmatically-enabling-2fa","text":"from nova2fa.models import UserTwoFactorSettings from nova2fa.methods import EmailOTPMethod, BackupCodesMethod def enable_email_2fa(user): \"\"\"Enable email 2FA for a user.\"\"\" settings, created = UserTwoFactorSettings.objects.get_or_create(user=user) # Generate backup codes backup_method = BackupCodesMethod() backup_data = backup_method.setup(user) # Enable 2FA settings.is_enabled = True settings.method = 'email' settings.backup_codes = backup_data['codes'] settings.save() return settings","title":"Programmatically Enabling 2FA"},{"location":"api-reference/#getting-2fa-statistics","text":"from nova2fa.models import UserTwoFactorSettings from django.db.models import Count def get_2fa_stats(): \"\"\"Get 2FA adoption statistics.\"\"\" total_users = UserTwoFactorSettings.objects.count() enabled = UserTwoFactorSettings.objects.filter(is_enabled=True).count() methods = UserTwoFactorSettings.objects.filter( is_enabled=True ).values('method').annotate(count=Count('method')) return { 'total_users': total_users, 'enabled': enabled, 'adoption_rate': (enabled / total_users * 100) if total_users > 0 else 0, 'methods': dict((m['method'], m['count']) for m in methods) }","title":"Getting 2FA Statistics"},{"location":"api-reference/#session-management","text":"from django.utils import timezone def mark_2fa_verified(request): \"\"\"Mark session as 2FA verified.\"\"\" request.session['nova2fa_verified_at'] = timezone.now().isoformat() request.session.save() def clear_2fa_verification(request): \"\"\"Clear 2FA verification from session.\"\"\" if 'nova2fa_verified_at' in request.session: del request.session['nova2fa_verified_at'] request.session.save()","title":"Session Management"},{"location":"api-reference/#middleware","text":"","title":"Middleware"},{"location":"api-reference/#nova2famiddleware","text":"The middleware automatically enforces 2FA verification. Configuration: # settings.py MIDDLEWARE = [ # ... 'nova2fa.middleware.Nova2FAMiddleware', ] Behavior: Checks if user is authenticated Checks if path is exempt Checks if user has 2FA enabled Checks if session is verified Redirects to verification if needed","title":"Nova2FAMiddleware"},{"location":"api-reference/#signals","text":"Nova2FA creates UserTwoFactorSettings automatically when users are created: # In your app from django.contrib.auth import get_user_model User = get_user_model() user = User.objects.create_user('john', 'john@example.com', 'password') # Nova2FA automatically creates settings assert hasattr(user, 'nova2fa_settings')","title":"Signals"},{"location":"api-reference/#example-custom-dashboard","text":"# views.py from django.contrib.auth.decorators import login_required from django.shortcuts import render from nova2fa.models import UserTwoFactorSettings, EmailOTP from django.utils import timezone from datetime import timedelta @login_required def security_dashboard(request): \"\"\"Custom security dashboard with 2FA info.\"\"\" try: settings = UserTwoFactorSettings.objects.get(user=request.user) has_2fa = settings.is_enabled method = settings.get_method_display() if has_2fa else None # Get recent OTP attempts recent_otps = EmailOTP.objects.filter( user=request.user, created_at__gte=timezone.now() - timedelta(days=7) ).count() # Check backup codes backup_codes_remaining = len(settings.get_available_backup_codes()) except UserTwoFactorSettings.DoesNotExist: has_2fa = False method = None recent_otps = 0 backup_codes_remaining = 0 context = { 'has_2fa': has_2fa, 'method': method, 'recent_otps': recent_otps, 'backup_codes_remaining': backup_codes_remaining, } return render(request, 'dashboard.html', context)","title":"Example: Custom Dashboard"},{"location":"api-reference/#next-steps","text":"Review Customization Guide for template customization Check GitHub Repository for examples","title":"Next Steps"},{"location":"configuration/","text":"Configuration Reference This page documents all available configuration options for Nova2FA. Overview All Nova2FA configuration is done through Django's settings system. Add configuration variables to your project's settings.py file. Example: # settings.py NOVA2FA_ENABLED_METHODS = ['email', 'totp'] NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 Core Settings NOVA2FA_ENABLED_METHODS Type : list Default : ['email', 'totp'] Description : List of enabled 2FA methods # Enable only email NOVA2FA_ENABLED_METHODS = ['email'] # Enable only TOTP NOVA2FA_ENABLED_METHODS = ['totp'] # Enable both (default) NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Enable custom method (if you've created one) NOVA2FA_ENABLED_METHODS = ['email', 'totp', 'sms'] Available built-in methods: 'email' - Email OTP 'totp' - Authenticator App (TOTP) NOVA2FA_VERIFICATION_WINDOW_DAYS Type : int Default : 14 Description : Number of days a user remains verified before requiring re-verification # Verify once per week NOVA2FA_VERIFICATION_WINDOW_DAYS = 7 # Verify once per month NOVA2FA_VERIFICATION_WINDOW_DAYS = 30 # Require verification on every session (not recommended) NOVA2FA_VERIFICATION_WINDOW_DAYS = 0 !!! note This affects how often users need to enter their 2FA code. Balance security with user experience. Email OTP Settings NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES Type : int Default : 10 Description : How long email OTP codes remain valid (in minutes) # 5 minute expiry (more secure, less convenient) NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 5 # 15 minute expiry (less secure, more convenient) NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 15 NOVA2FA_EMAIL_SUBJECT Type : str Default : 'Your One-Time Password' Description : Subject line for OTP emails NOVA2FA_EMAIL_SUBJECT = 'Your MyApp Verification Code' TOTP Settings NOVA2FA_TOTP_ISSUER Type : str Default : 'Nova2FA' Description : Issuer name shown in authenticator apps NOVA2FA_TOTP_ISSUER = 'MyCompany' This appears in authenticator apps like: MyCompany (user@example.com) 123 456 !!! tip Use your application or company name for easy identification by users. Backup Codes Settings NOVA2FA_BACKUP_CODE_COUNT Type : int Default : 8 Description : Number of backup codes to generate # Generate 10 backup codes NOVA2FA_BACKUP_CODE_COUNT = 10 # Generate 5 backup codes NOVA2FA_BACKUP_CODE_COUNT = 5 Security Settings NOVA2FA_SECRET_KEY (v1.1.0+) Type : str Default : Falls back to SECRET_KEY Description : Encryption key for TOTP secrets Required : Recommended for v1.1.0+ # Generate a unique key for Nova2FA from django.core.management.utils import get_random_secret_key NOVA2FA_SECRET_KEY = get_random_secret_key() !!! warning \"Security Best Practice\" Use a dedicated encryption key separate from Django's SECRET_KEY . Store in environment variables, never commit to version control. NOVA2FA_MAX_ATTEMPTS (v1.1.0+) Type : int Default : 5 Description : Maximum failed verification attempts before account lockout # Stricter lockout (3 attempts) NOVA2FA_MAX_ATTEMPTS = 3 # More lenient (10 attempts) NOVA2FA_MAX_ATTEMPTS = 10 NOVA2FA_LOCKOUT_DURATION_MINUTES (v1.1.0+) Type : int Default : 15 Description : Account lockout duration in minutes after max failed attempts # 30 minute lockout NOVA2FA_LOCKOUT_DURATION_MINUTES = 30 # 5 minute lockout (less secure) NOVA2FA_LOCKOUT_DURATION_MINUTES = 5 !!! note \"Brute Force Protection\" These settings work together to prevent brute force attacks. After NOVA2FA_MAX_ATTEMPTS failed verifications, the account is locked for NOVA2FA_LOCKOUT_DURATION_MINUTES . NOVA2FA_EXEMPT_SUPERUSERS Type : bool Default : False Description : Exempt superusers from 2FA verification # Exempt superusers (useful for emergency access) NOVA2FA_EXEMPT_SUPERUSERS = True # Require 2FA for everyone (recommended) NOVA2FA_EXEMPT_SUPERUSERS = False !!! warning \"Security Consideration\" Exempting superusers reduces security. Only enable this if you have other access controls in place. NOVA2FA_EXEMPT_PATHS Type : list Default : [] Description : List of URL paths to exempt from 2FA verification # Exempt API endpoints and health checks NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', '/status/', ] !!! note \"Default Exemptions\" These paths are always exempt and don't need to be added: - /2fa/ - /nova2fa/ - /admin/ NOVA2FA_PROTECTED_PATHS Type : list Default : ['*'] Description : List of URL paths that require 2FA verification # Protect all authenticated pages (default) NOVA2FA_PROTECTED_PATHS = ['*'] # Protect only specific paths NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/profile/', '/settings/', '/billing/', ] !!! tip \"Wildcard Behavior\" When '*' is in the list, all authenticated pages require 2FA unless explicitly exempted. Path Protection Examples Example 1: Protect Everything NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [] All authenticated pages require 2FA. Example 2: Protect Sensitive Areas Only NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/admin/', '/settings/', '/billing/', ] NOVA2FA_EXEMPT_PATHS = ['/api/'] Only listed paths require 2FA. Public APIs are accessible. Example 3: Protect Most, Exempt Some NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/help/', '/docs/', ] All pages require 2FA except public APIs, help, and docs. Complete Configuration Example # settings.py import os # ===== Nova2FA Configuration ===== # Available methods NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Verification settings NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 # Email OTP NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 10 NOVA2FA_EMAIL_SUBJECT = 'Your MyApp Verification Code' # TOTP NOVA2FA_TOTP_ISSUER = 'MyApp' # Backup codes NOVA2FA_BACKUP_CODE_COUNT = 8 # Security (v1.1.0+) NOVA2FA_SECRET_KEY = os.environ.get('NOVA2FA_SECRET_KEY') # Required! NOVA2FA_MAX_ATTEMPTS = 5 NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 NOVA2FA_EXEMPT_SUPERUSERS = False # Path protection NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', ] # ===== End Nova2FA Configuration ===== Environment Variables (Optional) For better security, you can use environment variables: # settings.py import os NOVA2FA_EMAIL_SUBJECT = os.environ.get( 'NOVA2FA_EMAIL_SUBJECT', 'Your Verification Code' ) NOVA2FA_TOTP_ISSUER = os.environ.get( 'NOVA2FA_TOTP_ISSUER', 'MyApp' ) Then in your .env file: NOVA2FA_EMAIL_SUBJECT=\"MyApp Security Code\" NOVA2FA_TOTP_ISSUER=\"MyCompany\" Configuration Validation Nova2FA validates configuration on startup. Invalid values will raise errors: # \u274c Invalid - not a list NOVA2FA_ENABLED_METHODS = 'email' # Error! # \u2705 Valid NOVA2FA_ENABLED_METHODS = ['email'] # \u274c Invalid - not an integer NOVA2FA_VERIFICATION_WINDOW_DAYS = \"14\" # Error! # \u2705 Valid NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 Next Steps Learn about Template Customization","title":"Configuration"},{"location":"configuration/#configuration-reference","text":"This page documents all available configuration options for Nova2FA.","title":"Configuration Reference"},{"location":"configuration/#overview","text":"All Nova2FA configuration is done through Django's settings system. Add configuration variables to your project's settings.py file. Example: # settings.py NOVA2FA_ENABLED_METHODS = ['email', 'totp'] NOVA2FA_VERIFICATION_WINDOW_DAYS = 14","title":"Overview"},{"location":"configuration/#core-settings","text":"","title":"Core Settings"},{"location":"configuration/#nova2fa_enabled_methods","text":"Type : list Default : ['email', 'totp'] Description : List of enabled 2FA methods # Enable only email NOVA2FA_ENABLED_METHODS = ['email'] # Enable only TOTP NOVA2FA_ENABLED_METHODS = ['totp'] # Enable both (default) NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Enable custom method (if you've created one) NOVA2FA_ENABLED_METHODS = ['email', 'totp', 'sms'] Available built-in methods: 'email' - Email OTP 'totp' - Authenticator App (TOTP)","title":"NOVA2FA_ENABLED_METHODS"},{"location":"configuration/#nova2fa_verification_window_days","text":"Type : int Default : 14 Description : Number of days a user remains verified before requiring re-verification # Verify once per week NOVA2FA_VERIFICATION_WINDOW_DAYS = 7 # Verify once per month NOVA2FA_VERIFICATION_WINDOW_DAYS = 30 # Require verification on every session (not recommended) NOVA2FA_VERIFICATION_WINDOW_DAYS = 0 !!! note This affects how often users need to enter their 2FA code. Balance security with user experience.","title":"NOVA2FA_VERIFICATION_WINDOW_DAYS"},{"location":"configuration/#email-otp-settings","text":"","title":"Email OTP Settings"},{"location":"configuration/#nova2fa_email_otp_expiry_minutes","text":"Type : int Default : 10 Description : How long email OTP codes remain valid (in minutes) # 5 minute expiry (more secure, less convenient) NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 5 # 15 minute expiry (less secure, more convenient) NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 15","title":"NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES"},{"location":"configuration/#nova2fa_email_subject","text":"Type : str Default : 'Your One-Time Password' Description : Subject line for OTP emails NOVA2FA_EMAIL_SUBJECT = 'Your MyApp Verification Code'","title":"NOVA2FA_EMAIL_SUBJECT"},{"location":"configuration/#totp-settings","text":"","title":"TOTP Settings"},{"location":"configuration/#nova2fa_totp_issuer","text":"Type : str Default : 'Nova2FA' Description : Issuer name shown in authenticator apps NOVA2FA_TOTP_ISSUER = 'MyCompany' This appears in authenticator apps like: MyCompany (user@example.com) 123 456 !!! tip Use your application or company name for easy identification by users.","title":"NOVA2FA_TOTP_ISSUER"},{"location":"configuration/#backup-codes-settings","text":"","title":"Backup Codes Settings"},{"location":"configuration/#nova2fa_backup_code_count","text":"Type : int Default : 8 Description : Number of backup codes to generate # Generate 10 backup codes NOVA2FA_BACKUP_CODE_COUNT = 10 # Generate 5 backup codes NOVA2FA_BACKUP_CODE_COUNT = 5","title":"NOVA2FA_BACKUP_CODE_COUNT"},{"location":"configuration/#security-settings","text":"","title":"Security Settings"},{"location":"configuration/#nova2fa_secret_key-v110","text":"Type : str Default : Falls back to SECRET_KEY Description : Encryption key for TOTP secrets Required : Recommended for v1.1.0+ # Generate a unique key for Nova2FA from django.core.management.utils import get_random_secret_key NOVA2FA_SECRET_KEY = get_random_secret_key() !!! warning \"Security Best Practice\" Use a dedicated encryption key separate from Django's SECRET_KEY . Store in environment variables, never commit to version control.","title":"NOVA2FA_SECRET_KEY (v1.1.0+)"},{"location":"configuration/#nova2fa_max_attempts-v110","text":"Type : int Default : 5 Description : Maximum failed verification attempts before account lockout # Stricter lockout (3 attempts) NOVA2FA_MAX_ATTEMPTS = 3 # More lenient (10 attempts) NOVA2FA_MAX_ATTEMPTS = 10","title":"NOVA2FA_MAX_ATTEMPTS (v1.1.0+)"},{"location":"configuration/#nova2fa_lockout_duration_minutes-v110","text":"Type : int Default : 15 Description : Account lockout duration in minutes after max failed attempts # 30 minute lockout NOVA2FA_LOCKOUT_DURATION_MINUTES = 30 # 5 minute lockout (less secure) NOVA2FA_LOCKOUT_DURATION_MINUTES = 5 !!! note \"Brute Force Protection\" These settings work together to prevent brute force attacks. After NOVA2FA_MAX_ATTEMPTS failed verifications, the account is locked for NOVA2FA_LOCKOUT_DURATION_MINUTES .","title":"NOVA2FA_LOCKOUT_DURATION_MINUTES (v1.1.0+)"},{"location":"configuration/#nova2fa_exempt_superusers","text":"Type : bool Default : False Description : Exempt superusers from 2FA verification # Exempt superusers (useful for emergency access) NOVA2FA_EXEMPT_SUPERUSERS = True # Require 2FA for everyone (recommended) NOVA2FA_EXEMPT_SUPERUSERS = False !!! warning \"Security Consideration\" Exempting superusers reduces security. Only enable this if you have other access controls in place.","title":"NOVA2FA_EXEMPT_SUPERUSERS"},{"location":"configuration/#nova2fa_exempt_paths","text":"Type : list Default : [] Description : List of URL paths to exempt from 2FA verification # Exempt API endpoints and health checks NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', '/status/', ] !!! note \"Default Exemptions\" These paths are always exempt and don't need to be added: - /2fa/ - /nova2fa/ - /admin/","title":"NOVA2FA_EXEMPT_PATHS"},{"location":"configuration/#nova2fa_protected_paths","text":"Type : list Default : ['*'] Description : List of URL paths that require 2FA verification # Protect all authenticated pages (default) NOVA2FA_PROTECTED_PATHS = ['*'] # Protect only specific paths NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/profile/', '/settings/', '/billing/', ] !!! tip \"Wildcard Behavior\" When '*' is in the list, all authenticated pages require 2FA unless explicitly exempted.","title":"NOVA2FA_PROTECTED_PATHS"},{"location":"configuration/#path-protection-examples","text":"","title":"Path Protection Examples"},{"location":"configuration/#example-1-protect-everything","text":"NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [] All authenticated pages require 2FA.","title":"Example 1: Protect Everything"},{"location":"configuration/#example-2-protect-sensitive-areas-only","text":"NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/admin/', '/settings/', '/billing/', ] NOVA2FA_EXEMPT_PATHS = ['/api/'] Only listed paths require 2FA. Public APIs are accessible.","title":"Example 2: Protect Sensitive Areas Only"},{"location":"configuration/#example-3-protect-most-exempt-some","text":"NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/help/', '/docs/', ] All pages require 2FA except public APIs, help, and docs.","title":"Example 3: Protect Most, Exempt Some"},{"location":"configuration/#complete-configuration-example","text":"# settings.py import os # ===== Nova2FA Configuration ===== # Available methods NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Verification settings NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 # Email OTP NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 10 NOVA2FA_EMAIL_SUBJECT = 'Your MyApp Verification Code' # TOTP NOVA2FA_TOTP_ISSUER = 'MyApp' # Backup codes NOVA2FA_BACKUP_CODE_COUNT = 8 # Security (v1.1.0+) NOVA2FA_SECRET_KEY = os.environ.get('NOVA2FA_SECRET_KEY') # Required! NOVA2FA_MAX_ATTEMPTS = 5 NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 NOVA2FA_EXEMPT_SUPERUSERS = False # Path protection NOVA2FA_PROTECTED_PATHS = ['*'] NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', ] # ===== End Nova2FA Configuration =====","title":"Complete Configuration Example"},{"location":"configuration/#environment-variables-optional","text":"For better security, you can use environment variables: # settings.py import os NOVA2FA_EMAIL_SUBJECT = os.environ.get( 'NOVA2FA_EMAIL_SUBJECT', 'Your Verification Code' ) NOVA2FA_TOTP_ISSUER = os.environ.get( 'NOVA2FA_TOTP_ISSUER', 'MyApp' ) Then in your .env file: NOVA2FA_EMAIL_SUBJECT=\"MyApp Security Code\" NOVA2FA_TOTP_ISSUER=\"MyCompany\"","title":"Environment Variables (Optional)"},{"location":"configuration/#configuration-validation","text":"Nova2FA validates configuration on startup. Invalid values will raise errors: # \u274c Invalid - not a list NOVA2FA_ENABLED_METHODS = 'email' # Error! # \u2705 Valid NOVA2FA_ENABLED_METHODS = ['email'] # \u274c Invalid - not an integer NOVA2FA_VERIFICATION_WINDOW_DAYS = \"14\" # Error! # \u2705 Valid NOVA2FA_VERIFICATION_WINDOW_DAYS = 14","title":"Configuration Validation"},{"location":"configuration/#next-steps","text":"Learn about Template Customization","title":"Next Steps"},{"location":"customization/","text":"Customization Guide Nova2FA is designed to be completely customizable. This guide shows you how to adapt it to your needs. Template Customization Understanding Template Structure Nova2FA provides unstyled templates with minimal CSS. All templates extend from a base template that you can override. Template hierarchy: nova2fa/base_2fa.html (Base template) \u251c\u2500\u2500 nova2fa/settings.html (2FA settings page) \u251c\u2500\u2500 nova2fa/setup.html (Method selection) \u251c\u2500\u2500 nova2fa/setup_totp.html (TOTP setup) \u251c\u2500\u2500 nova2fa/verify.html (Verification page) \u251c\u2500\u2500 nova2fa/verify_email_otp.html (Email verification during setup) \u251c\u2500\u2500 nova2fa/disable.html (Disable 2FA) \u251c\u2500\u2500 nova2fa/backup_codes.html (View backup codes) \u2514\u2500\u2500 nova2fa/change_method.html (Change method) Method 1: Override Base Template The simplest way to customize is to override the base template with your own. Create templates/nova2fa/base_2fa.html in your project: {% extends \"base.html\" %} {% block content %} <div class=\"container my-5\"> {% if messages %} <div class=\"messages\"> {% for message in messages %} <div class=\"alert alert-{{ message.tags }}\"> {{ message }} </div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> {% endblock %} Now all Nova2FA pages will use your base template and styling! Method 2: Override Individual Templates You can override any specific template by creating it in your project's template directory. Example: Custom settings page Create templates/nova2fa/settings.html : {% extends \"base.html\" %} {% load static %} {% block title %}Security Settings{% endblock %} {% block content %} <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-8 offset-md-2\"> <h1 class=\"mb-4\">Two-Factor Authentication</h1> {% if two_factor_settings.is_enabled %} <div class=\"card border-success\"> <div class=\"card-body\"> <h5 class=\"card-title\"> <i class=\"bi bi-shield-check\"></i> 2FA Enabled </h5> <p class=\"card-text\"> <strong>Method:</strong> {{ two_factor_settings.get_method_display }} </p> <p class=\"card-text\"> <strong>Last Verified:</strong> {{ two_factor_settings.last_verified|date:\"F d, Y\" }} </p> <div class=\"btn-group\" role=\"group\"> <a href=\"{% url 'nova2fa:change_method' %}\" class=\"btn btn-outline-primary\"> Change Method </a> <a href=\"{% url 'nova2fa:view_backup_codes' %}\" class=\"btn btn-outline-secondary\"> Backup Codes </a> <a href=\"{% url 'nova2fa:disable' %}\" class=\"btn btn-outline-danger\"> Disable </a> </div> </div> </div> {% else %} <div class=\"card border-warning\"> <div class=\"card-body\"> <h5 class=\"card-title\"> <i class=\"bi bi-shield-exclamation\"></i> 2FA Not Enabled </h5> <p class=\"card-text\"> Protect your account with two-factor authentication. </p> <a href=\"{% url 'nova2fa:setup' %}\" class=\"btn btn-primary\"> Enable Two-Factor Authentication </a> </div> </div> {% endif %} </div> </div> </div> {% endblock %} Method 3: Add Custom CSS Classes Nova2FA templates use prefixed CSS classes ( nova2fa-* ) that you can style: /* static/css/nova2fa-custom.css */ .nova2fa-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); } .nova2fa-button { background: #667eea; border: none; padding: 12px 30px; border-radius: 5px; transition: all 0.3s; } .nova2fa-button:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4); } .nova2fa-input { border: 2px solid #e2e8f0; border-radius: 5px; padding: 10px; font-size: 16px; } .nova2fa-input:focus { border-color: #667eea; outline: none; } Include it in your base template: {% load static %} <link rel=\"stylesheet\" href=\"{% static 'css/nova2fa-custom.css' %}\"> Framework Integration Examples Bootstrap 5 {% extends \"base.html\" %} {% block content %} <div class=\"container mt-5\"> <div class=\"row justify-content-center\"> <div class=\"col-md-6\"> <div class=\"card shadow\"> <div class=\"card-body\"> {% if messages %} {% for message in messages %} <div class=\"alert alert-{{ message.tags }} alert-dismissible fade show\"> {{ message }} <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button> </div> {% endfor %} {% endif %} {% block nova2fa_content %}{% endblock %} </div> </div> </div> </div> </div> {% endblock %} Tailwind CSS {% extends \"base.html\" %} {% block content %} <div class=\"container mx-auto px-4 py-8\"> <div class=\"max-w-2xl mx-auto\"> <div class=\"bg-white rounded-lg shadow-lg p-6\"> {% if messages %} <div class=\"mb-4\"> {% for message in messages %} <div class=\"rounded-md p-4 mb-2 {% if message.tags == 'success' %}bg-green-50 text-green-800{% endif %} {% if message.tags == 'error' %}bg-red-50 text-red-800{% endif %} {% if message.tags == 'warning' %}bg-yellow-50 text-yellow-800{% endif %} {% if message.tags == 'info' %}bg-blue-50 text-blue-800{% endif %}\"> {{ message }} </div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> </div> </div> {% endblock %} Email Template Customization Customize the OTP email by overriding the template: Create templates/nova2fa/emails/otp_email.html : <!DOCTYPE html> <html> <head> <style> body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; } .container { max-width: 600px; margin: 40px auto; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; color: white; } .content { padding: 40px; } .code { background: #f8f9fa; border: 2px dashed #667eea; padding: 20px; text-align: center; font-size: 32px; font-weight: bold; letter-spacing: 5px; margin: 30px 0; border-radius: 5px; } .footer { background: #f8f9fa; padding: 20px; text-align: center; color: #6c757d; font-size: 12px; } </style> </head> <body> <div class=\"container\"> <div class=\"header\"> <h1>Your Verification Code</h1> </div> <div class=\"content\"> <p>Hello {{ user.get_full_name|default:user.username }},</p> <p>Your two-factor authentication code is:</p> <div class=\"code\">{{ otp }}</div> <p>This code will expire in <strong>{{ expiry_minutes }} minutes</strong>.</p> <p style=\"margin-top: 30px;\"> <strong>Security Notice:</strong> If you didn't request this code, please ignore this email and ensure your account is secure. </p> </div> <div class=\"footer\"> <p>This is an automated message. Please do not reply to this email.</p> </div> </div> </body> </html> Form Customization Override forms to add custom widgets or validation: # myapp/forms.py from nova2fa.forms import TOTPVerificationForm class CustomTOTPForm(TOTPVerificationForm): def __init__(self, *args, **kwargs): super().__init__(*args, **kwargs) # Add Bootstrap classes self.fields['code'].widget.attrs.update({ 'class': 'form-control form-control-lg text-center', 'placeholder': '000000', 'autofocus': True, }) Then use it in your custom view or override the template to use it. URL Customization You can change the URL prefix from /2fa/ to anything: # urls.py urlpatterns = [ path('security/', include('nova2fa.urls')), # Now it's /security/ path('mfa/', include('nova2fa.urls')), # Or /mfa/ ] Adding Custom Pages Add your own pages that integrate with Nova2FA: # myapp/views.py from django.contrib.auth.decorators import login_required from nova2fa.models import UserTwoFactorSettings @login_required def security_dashboard(request): try: two_factor = UserTwoFactorSettings.objects.get(user=request.user) has_2fa = two_factor.is_enabled except UserTwoFactorSettings.DoesNotExist: has_2fa = False context = { 'has_2fa': has_2fa, # Add more security metrics } return render(request, 'myapp/security_dashboard.html', context) Translation/Internationalization Nova2FA is translation-ready. Add translations in your project: # settings.py LANGUAGE_CODE = 'es' # Spanish USE_I18N = True Create translation files: django-admin makemessages -l es # Edit locale/es/LC_MESSAGES/django.po django-admin compilemessages JavaScript Enhancement Add JavaScript for better UX: <!-- templates/nova2fa/setup_totp.html --> {% extends \"nova2fa/base_2fa.html\" %} {% block extra_js %} <script> document.addEventListener('DOMContentLoaded', function() { const codeInput = document.querySelector('[name=\"code\"]'); // Auto-submit when 6 digits entered codeInput.addEventListener('input', function(e) { if (this.value.length === 6) { this.form.submit(); } }); // Auto-focus on page load codeInput.focus(); }); </script> {% endblock %} Next Steps Check the API Reference for programmatic usage Review the Example Project","title":"Customization"},{"location":"customization/#customization-guide","text":"Nova2FA is designed to be completely customizable. This guide shows you how to adapt it to your needs.","title":"Customization Guide"},{"location":"customization/#template-customization","text":"","title":"Template Customization"},{"location":"customization/#understanding-template-structure","text":"Nova2FA provides unstyled templates with minimal CSS. All templates extend from a base template that you can override. Template hierarchy: nova2fa/base_2fa.html (Base template) \u251c\u2500\u2500 nova2fa/settings.html (2FA settings page) \u251c\u2500\u2500 nova2fa/setup.html (Method selection) \u251c\u2500\u2500 nova2fa/setup_totp.html (TOTP setup) \u251c\u2500\u2500 nova2fa/verify.html (Verification page) \u251c\u2500\u2500 nova2fa/verify_email_otp.html (Email verification during setup) \u251c\u2500\u2500 nova2fa/disable.html (Disable 2FA) \u251c\u2500\u2500 nova2fa/backup_codes.html (View backup codes) \u2514\u2500\u2500 nova2fa/change_method.html (Change method)","title":"Understanding Template Structure"},{"location":"customization/#method-1-override-base-template","text":"The simplest way to customize is to override the base template with your own. Create templates/nova2fa/base_2fa.html in your project: {% extends \"base.html\" %} {% block content %} <div class=\"container my-5\"> {% if messages %} <div class=\"messages\"> {% for message in messages %} <div class=\"alert alert-{{ message.tags }}\"> {{ message }} </div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> {% endblock %} Now all Nova2FA pages will use your base template and styling!","title":"Method 1: Override Base Template"},{"location":"customization/#method-2-override-individual-templates","text":"You can override any specific template by creating it in your project's template directory. Example: Custom settings page Create templates/nova2fa/settings.html : {% extends \"base.html\" %} {% load static %} {% block title %}Security Settings{% endblock %} {% block content %} <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-8 offset-md-2\"> <h1 class=\"mb-4\">Two-Factor Authentication</h1> {% if two_factor_settings.is_enabled %} <div class=\"card border-success\"> <div class=\"card-body\"> <h5 class=\"card-title\"> <i class=\"bi bi-shield-check\"></i> 2FA Enabled </h5> <p class=\"card-text\"> <strong>Method:</strong> {{ two_factor_settings.get_method_display }} </p> <p class=\"card-text\"> <strong>Last Verified:</strong> {{ two_factor_settings.last_verified|date:\"F d, Y\" }} </p> <div class=\"btn-group\" role=\"group\"> <a href=\"{% url 'nova2fa:change_method' %}\" class=\"btn btn-outline-primary\"> Change Method </a> <a href=\"{% url 'nova2fa:view_backup_codes' %}\" class=\"btn btn-outline-secondary\"> Backup Codes </a> <a href=\"{% url 'nova2fa:disable' %}\" class=\"btn btn-outline-danger\"> Disable </a> </div> </div> </div> {% else %} <div class=\"card border-warning\"> <div class=\"card-body\"> <h5 class=\"card-title\"> <i class=\"bi bi-shield-exclamation\"></i> 2FA Not Enabled </h5> <p class=\"card-text\"> Protect your account with two-factor authentication. </p> <a href=\"{% url 'nova2fa:setup' %}\" class=\"btn btn-primary\"> Enable Two-Factor Authentication </a> </div> </div> {% endif %} </div> </div> </div> {% endblock %}","title":"Method 2: Override Individual Templates"},{"location":"customization/#method-3-add-custom-css-classes","text":"Nova2FA templates use prefixed CSS classes ( nova2fa-* ) that you can style: /* static/css/nova2fa-custom.css */ .nova2fa-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); } .nova2fa-button { background: #667eea; border: none; padding: 12px 30px; border-radius: 5px; transition: all 0.3s; } .nova2fa-button:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4); } .nova2fa-input { border: 2px solid #e2e8f0; border-radius: 5px; padding: 10px; font-size: 16px; } .nova2fa-input:focus { border-color: #667eea; outline: none; } Include it in your base template: {% load static %} <link rel=\"stylesheet\" href=\"{% static 'css/nova2fa-custom.css' %}\">","title":"Method 3: Add Custom CSS Classes"},{"location":"customization/#framework-integration-examples","text":"","title":"Framework Integration Examples"},{"location":"customization/#bootstrap-5","text":"{% extends \"base.html\" %} {% block content %} <div class=\"container mt-5\"> <div class=\"row justify-content-center\"> <div class=\"col-md-6\"> <div class=\"card shadow\"> <div class=\"card-body\"> {% if messages %} {% for message in messages %} <div class=\"alert alert-{{ message.tags }} alert-dismissible fade show\"> {{ message }} <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button> </div> {% endfor %} {% endif %} {% block nova2fa_content %}{% endblock %} </div> </div> </div> </div> </div> {% endblock %}","title":"Bootstrap 5"},{"location":"customization/#tailwind-css","text":"{% extends \"base.html\" %} {% block content %} <div class=\"container mx-auto px-4 py-8\"> <div class=\"max-w-2xl mx-auto\"> <div class=\"bg-white rounded-lg shadow-lg p-6\"> {% if messages %} <div class=\"mb-4\"> {% for message in messages %} <div class=\"rounded-md p-4 mb-2 {% if message.tags == 'success' %}bg-green-50 text-green-800{% endif %} {% if message.tags == 'error' %}bg-red-50 text-red-800{% endif %} {% if message.tags == 'warning' %}bg-yellow-50 text-yellow-800{% endif %} {% if message.tags == 'info' %}bg-blue-50 text-blue-800{% endif %}\"> {{ message }} </div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> </div> </div> {% endblock %}","title":"Tailwind CSS"},{"location":"customization/#email-template-customization","text":"Customize the OTP email by overriding the template: Create templates/nova2fa/emails/otp_email.html : <!DOCTYPE html> <html> <head> <style> body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; } .container { max-width: 600px; margin: 40px auto; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; color: white; } .content { padding: 40px; } .code { background: #f8f9fa; border: 2px dashed #667eea; padding: 20px; text-align: center; font-size: 32px; font-weight: bold; letter-spacing: 5px; margin: 30px 0; border-radius: 5px; } .footer { background: #f8f9fa; padding: 20px; text-align: center; color: #6c757d; font-size: 12px; } </style> </head> <body> <div class=\"container\"> <div class=\"header\"> <h1>Your Verification Code</h1> </div> <div class=\"content\"> <p>Hello {{ user.get_full_name|default:user.username }},</p> <p>Your two-factor authentication code is:</p> <div class=\"code\">{{ otp }}</div> <p>This code will expire in <strong>{{ expiry_minutes }} minutes</strong>.</p> <p style=\"margin-top: 30px;\"> <strong>Security Notice:</strong> If you didn't request this code, please ignore this email and ensure your account is secure. </p> </div> <div class=\"footer\"> <p>This is an automated message. Please do not reply to this email.</p> </div> </div> </body> </html>","title":"Email Template Customization"},{"location":"customization/#form-customization","text":"Override forms to add custom widgets or validation: # myapp/forms.py from nova2fa.forms import TOTPVerificationForm class CustomTOTPForm(TOTPVerificationForm): def __init__(self, *args, **kwargs): super().__init__(*args, **kwargs) # Add Bootstrap classes self.fields['code'].widget.attrs.update({ 'class': 'form-control form-control-lg text-center', 'placeholder': '000000', 'autofocus': True, }) Then use it in your custom view or override the template to use it.","title":"Form Customization"},{"location":"customization/#url-customization","text":"You can change the URL prefix from /2fa/ to anything: # urls.py urlpatterns = [ path('security/', include('nova2fa.urls')), # Now it's /security/ path('mfa/', include('nova2fa.urls')), # Or /mfa/ ]","title":"URL Customization"},{"location":"customization/#adding-custom-pages","text":"Add your own pages that integrate with Nova2FA: # myapp/views.py from django.contrib.auth.decorators import login_required from nova2fa.models import UserTwoFactorSettings @login_required def security_dashboard(request): try: two_factor = UserTwoFactorSettings.objects.get(user=request.user) has_2fa = two_factor.is_enabled except UserTwoFactorSettings.DoesNotExist: has_2fa = False context = { 'has_2fa': has_2fa, # Add more security metrics } return render(request, 'myapp/security_dashboard.html', context)","title":"Adding Custom Pages"},{"location":"customization/#translationinternationalization","text":"Nova2FA is translation-ready. Add translations in your project: # settings.py LANGUAGE_CODE = 'es' # Spanish USE_I18N = True Create translation files: django-admin makemessages -l es # Edit locale/es/LC_MESSAGES/django.po django-admin compilemessages","title":"Translation/Internationalization"},{"location":"customization/#javascript-enhancement","text":"Add JavaScript for better UX: <!-- templates/nova2fa/setup_totp.html --> {% extends \"nova2fa/base_2fa.html\" %} {% block extra_js %} <script> document.addEventListener('DOMContentLoaded', function() { const codeInput = document.querySelector('[name=\"code\"]'); // Auto-submit when 6 digits entered codeInput.addEventListener('input', function(e) { if (this.value.length === 6) { this.form.submit(); } }); // Auto-focus on page load codeInput.focus(); }); </script> {% endblock %}","title":"JavaScript Enhancement"},{"location":"customization/#next-steps","text":"Check the API Reference for programmatic usage Review the Example Project","title":"Next Steps"},{"location":"installation/","text":"Installation Guide This guide will walk you through installing Nova2FA in your Django project. Requirements Before installing Nova2FA, ensure you have: Python 3.8 or higher Django 4.2 or higher A working Django project with authentication Step 1: Install the Package Install Nova2FA using pip: pip install nova2fa This will install Nova2FA and its dependencies: pyotp - For TOTP implementation qrcode - For QR code generation Pillow - For image processing cryptography - For encryption (v1.1.0+) Step 2: Add to INSTALLED_APPS In your Django project's settings.py , add nova2fa to INSTALLED_APPS : INSTALLED_APPS = [ # Django apps 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', # Your apps 'myapp', # Third-party apps 'nova2fa', # Add this line ] !!! warning \"Order Matters\" Make sure nova2fa is added after Django's built-in apps, especially django.contrib.auth and django.contrib.sessions . Step 3: Add Middleware Add Nova2FA middleware to your MIDDLEWARE setting, right after AuthenticationMiddleware : MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'nova2fa.middleware.Nova2FAMiddleware', # Add this line 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', ] !!! danger \"Critical Placement\" The middleware must come after AuthenticationMiddleware and SessionMiddleware to function correctly. Step 4: Include URLs Add Nova2FA URLs to your project's main urls.py : from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('2fa/', include('nova2fa.urls')), # Add this line # ... your other URL patterns ] You can use any URL prefix you prefer (e.g., 'security/' , 'mfa/' , etc.). Step 5: Security Configuration (v1.1.0+) !!! important \"Required for v1.1.0+\" Nova2FA v1.1.0 introduces encryption for TOTP secrets. Configure the encryption key in settings.py : # Optional: Dedicated encryption key for Nova2FA # If not set, Django's SECRET_KEY will be used NOVA2FA_SECRET_KEY = 'your-secret-encryption-key-here' # Optional: Brute force protection settings NOVA2FA_MAX_ATTEMPTS = 5 # Max failed verification attempts (default: 5) NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # Account lockout duration (default: 15) !!! warning \"Security Best Practice\" Use a separate NOVA2FA_SECRET_KEY instead of reusing SECRET_KEY . Generate a strong key: python from django.core.management.utils import get_random_secret_key print(get_random_secret_key()) Step 6: Configure Email (for Email OTP) If you plan to use Email OTP, configure your email backend in settings.py : EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' EMAIL_HOST = 'smtp.gmail.com' EMAIL_PORT = 587 EMAIL_USE_TLS = True EMAIL_HOST_USER = 'your-email@gmail.com' EMAIL_HOST_PASSWORD = 'your-app-password' ```DEFAULT_FROM_EMAIL = 'your-email@gmail.com' For development, you can use the console backend: EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend' Step 7: Run Migrations Create and apply database migrations: python manage.py migrate nova2fa This creates two tables: nova2fa_usertwofactorsettings - Stores user 2FA preferences nova2fa_emailotp - Stores email OTP codes Step 8: Basic Configuration Add basic Nova2FA configuration to your settings.py : # Nova2FA Configuration NOVA2FA_ENABLED_METHODS = ['email', 'totp'] NOVA2FA_TOTP_ISSUER = 'YourApp' See Configuration Reference for all available options. Step 8: Verify Installation Start your development server: python manage.py runserver Navigate to http://127.0.0.1:8000/2fa/settings/ (after logging in) to verify Nova2FA is installed correctly. Next Steps Follow the Quick Start Tutorial to set up your first 2FA flow Read the Configuration Reference to customize Nova2FA Check out the Customization Guide to style the templates Troubleshooting ImportError: No module named 'nova2fa' Solution : Ensure nova2fa is installed in your current Python environment: pip list | grep nova2fa MiddlewareNotUsed Error Solution : Make sure the middleware is placed after AuthenticationMiddleware in your MIDDLEWARE setting. Migration Errors Solution : If you see migration errors, try: python manage.py migrate nova2fa --fake-initial Email OTP Not Sending Solution : Check your email configuration and ensure you can send emails: python manage.py shell >>> from django.core.mail import send_mail >>> send_mail('Test', 'Test message', 'from@example.com', ['to@example.com']) Migrating from v1.0.x to v1.1.0 !!! warning \"Breaking Changes in v1.1.0\" Version 1.1.0 introduces security enhancements that require user action. What Changed Security Enhancements: TOTP secrets are now encrypted at rest Backup codes are now hashed (like passwords) Account lockout after failed verification attempts Rate limiting on verification endpoints Migration Steps 1. Update the Package pip install --upgrade nova2fa 2. Configure Encryption Key Add to your settings.py : # Generate a new key with: # from django.core.management.utils import get_random_secret_key # print(get_random_secret_key()) NOVA2FA_SECRET_KEY = 'your-new-encryption-key-here' 3. Run Migrations python manage.py migrate nova2fa This adds new fields: failed_attempts - Tracks failed verification attempts locked_until - Stores account lockout expiration totp_secret max_length increased to 512 (for encrypted values) 4. Notify Users !!! important \"User Action Required\" All users must regenerate their backup codes after the upgrade. Old backup codes (plain text) will no longer work. Users should: Log in to their account Navigate to 2FA settings Click \"Regenerate Backup Codes\" Save the new codes securely TOTP secrets: Existing TOTP setups will continue to work (backward compatible), but new setups will use encryption. 5. Update Templates (Optional) If you've customized Nova2FA templates, review them for: New lockout messages One-time backup code display behavior Failed attempts counter display Rollback Plan If you need to rollback to v1.0.x: # 1. Downgrade package pip install nova2fa==1.0.0 # 2. Revert migrations python manage.py migrate nova2fa 0001 # 3. Remove new settings from settings.py # Remove: NOVA2FA_SECRET_KEY, NOVA2FA_MAX_ATTEMPTS, NOVA2FA_LOCKOUT_DURATION_MINUTES !!! caution After rollback, users will need to regenerate backup codes again. Testing the Migration After migrating, test these scenarios: TOTP Verification - Existing TOTP should still work Backup Codes - Old codes won't work (expected) New Setup - New TOTP setups should use encryption Account Lockout - Test 5 failed attempts triggers lockout Backup Code Regeneration - Users can generate new hashed codes Need Help? If you encounter issues during migration: Check the CHANGELOG Review the Security Guide Open an issue on GitHub","title":"Installation"},{"location":"installation/#installation-guide","text":"This guide will walk you through installing Nova2FA in your Django project.","title":"Installation Guide"},{"location":"installation/#requirements","text":"Before installing Nova2FA, ensure you have: Python 3.8 or higher Django 4.2 or higher A working Django project with authentication","title":"Requirements"},{"location":"installation/#step-1-install-the-package","text":"Install Nova2FA using pip: pip install nova2fa This will install Nova2FA and its dependencies: pyotp - For TOTP implementation qrcode - For QR code generation Pillow - For image processing cryptography - For encryption (v1.1.0+)","title":"Step 1: Install the Package"},{"location":"installation/#step-2-add-to-installed_apps","text":"In your Django project's settings.py , add nova2fa to INSTALLED_APPS : INSTALLED_APPS = [ # Django apps 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', # Your apps 'myapp', # Third-party apps 'nova2fa', # Add this line ] !!! warning \"Order Matters\" Make sure nova2fa is added after Django's built-in apps, especially django.contrib.auth and django.contrib.sessions .","title":"Step 2: Add to INSTALLED_APPS"},{"location":"installation/#step-3-add-middleware","text":"Add Nova2FA middleware to your MIDDLEWARE setting, right after AuthenticationMiddleware : MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'nova2fa.middleware.Nova2FAMiddleware', # Add this line 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', ] !!! danger \"Critical Placement\" The middleware must come after AuthenticationMiddleware and SessionMiddleware to function correctly.","title":"Step 3: Add Middleware"},{"location":"installation/#step-4-include-urls","text":"Add Nova2FA URLs to your project's main urls.py : from django.contrib import admin from django.urls import path, include urlpatterns = [ path('admin/', admin.site.urls), path('2fa/', include('nova2fa.urls')), # Add this line # ... your other URL patterns ] You can use any URL prefix you prefer (e.g., 'security/' , 'mfa/' , etc.).","title":"Step 4: Include URLs"},{"location":"installation/#step-5-security-configuration-v110","text":"!!! important \"Required for v1.1.0+\" Nova2FA v1.1.0 introduces encryption for TOTP secrets. Configure the encryption key in settings.py : # Optional: Dedicated encryption key for Nova2FA # If not set, Django's SECRET_KEY will be used NOVA2FA_SECRET_KEY = 'your-secret-encryption-key-here' # Optional: Brute force protection settings NOVA2FA_MAX_ATTEMPTS = 5 # Max failed verification attempts (default: 5) NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # Account lockout duration (default: 15) !!! warning \"Security Best Practice\" Use a separate NOVA2FA_SECRET_KEY instead of reusing SECRET_KEY . Generate a strong key: python from django.core.management.utils import get_random_secret_key print(get_random_secret_key())","title":"Step 5: Security Configuration (v1.1.0+)"},{"location":"installation/#step-6-configure-email-for-email-otp","text":"If you plan to use Email OTP, configure your email backend in settings.py : EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' EMAIL_HOST = 'smtp.gmail.com' EMAIL_PORT = 587 EMAIL_USE_TLS = True EMAIL_HOST_USER = 'your-email@gmail.com' EMAIL_HOST_PASSWORD = 'your-app-password' ```DEFAULT_FROM_EMAIL = 'your-email@gmail.com' For development, you can use the console backend: EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'","title":"Step 6: Configure Email (for Email OTP)"},{"location":"installation/#step-7-run-migrations","text":"Create and apply database migrations: python manage.py migrate nova2fa This creates two tables: nova2fa_usertwofactorsettings - Stores user 2FA preferences nova2fa_emailotp - Stores email OTP codes","title":"Step 7: Run Migrations"},{"location":"installation/#step-8-basic-configuration","text":"Add basic Nova2FA configuration to your settings.py : # Nova2FA Configuration NOVA2FA_ENABLED_METHODS = ['email', 'totp'] NOVA2FA_TOTP_ISSUER = 'YourApp' See Configuration Reference for all available options.","title":"Step 8: Basic Configuration"},{"location":"installation/#step-8-verify-installation","text":"Start your development server: python manage.py runserver Navigate to http://127.0.0.1:8000/2fa/settings/ (after logging in) to verify Nova2FA is installed correctly.","title":"Step 8: Verify Installation"},{"location":"installation/#next-steps","text":"Follow the Quick Start Tutorial to set up your first 2FA flow Read the Configuration Reference to customize Nova2FA Check out the Customization Guide to style the templates","title":"Next Steps"},{"location":"installation/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"installation/#importerror-no-module-named-nova2fa","text":"Solution : Ensure nova2fa is installed in your current Python environment: pip list | grep nova2fa","title":"ImportError: No module named 'nova2fa'"},{"location":"installation/#middlewarenotused-error","text":"Solution : Make sure the middleware is placed after AuthenticationMiddleware in your MIDDLEWARE setting.","title":"MiddlewareNotUsed Error"},{"location":"installation/#migration-errors","text":"Solution : If you see migration errors, try: python manage.py migrate nova2fa --fake-initial","title":"Migration Errors"},{"location":"installation/#email-otp-not-sending","text":"Solution : Check your email configuration and ensure you can send emails: python manage.py shell >>> from django.core.mail import send_mail >>> send_mail('Test', 'Test message', 'from@example.com', ['to@example.com'])","title":"Email OTP Not Sending"},{"location":"installation/#migrating-from-v10x-to-v110","text":"!!! warning \"Breaking Changes in v1.1.0\" Version 1.1.0 introduces security enhancements that require user action.","title":"Migrating from v1.0.x to v1.1.0"},{"location":"installation/#what-changed","text":"Security Enhancements: TOTP secrets are now encrypted at rest Backup codes are now hashed (like passwords) Account lockout after failed verification attempts Rate limiting on verification endpoints","title":"What Changed"},{"location":"installation/#migration-steps","text":"","title":"Migration Steps"},{"location":"installation/#1-update-the-package","text":"pip install --upgrade nova2fa","title":"1. Update the Package"},{"location":"installation/#2-configure-encryption-key","text":"Add to your settings.py : # Generate a new key with: # from django.core.management.utils import get_random_secret_key # print(get_random_secret_key()) NOVA2FA_SECRET_KEY = 'your-new-encryption-key-here'","title":"2. Configure Encryption Key"},{"location":"installation/#3-run-migrations","text":"python manage.py migrate nova2fa This adds new fields: failed_attempts - Tracks failed verification attempts locked_until - Stores account lockout expiration totp_secret max_length increased to 512 (for encrypted values)","title":"3. Run Migrations"},{"location":"installation/#4-notify-users","text":"!!! important \"User Action Required\" All users must regenerate their backup codes after the upgrade. Old backup codes (plain text) will no longer work. Users should: Log in to their account Navigate to 2FA settings Click \"Regenerate Backup Codes\" Save the new codes securely TOTP secrets: Existing TOTP setups will continue to work (backward compatible), but new setups will use encryption.","title":"4. Notify Users"},{"location":"installation/#5-update-templates-optional","text":"If you've customized Nova2FA templates, review them for: New lockout messages One-time backup code display behavior Failed attempts counter display","title":"5. Update Templates (Optional)"},{"location":"installation/#rollback-plan","text":"If you need to rollback to v1.0.x: # 1. Downgrade package pip install nova2fa==1.0.0 # 2. Revert migrations python manage.py migrate nova2fa 0001 # 3. Remove new settings from settings.py # Remove: NOVA2FA_SECRET_KEY, NOVA2FA_MAX_ATTEMPTS, NOVA2FA_LOCKOUT_DURATION_MINUTES !!! caution After rollback, users will need to regenerate backup codes again.","title":"Rollback Plan"},{"location":"installation/#testing-the-migration","text":"After migrating, test these scenarios: TOTP Verification - Existing TOTP should still work Backup Codes - Old codes won't work (expected) New Setup - New TOTP setups should use encryption Account Lockout - Test 5 failed attempts triggers lockout Backup Code Regeneration - Users can generate new hashed codes","title":"Testing the Migration"},{"location":"installation/#need-help","text":"If you encounter issues during migration: Check the CHANGELOG Review the Security Guide Open an issue on GitHub","title":"Need Help?"},{"location":"quickstart/","text":"Quick Start Tutorial This tutorial will guide you through setting up Nova2FA in a Django project and enabling your first 2FA authentication. Prerequisites Before starting, ensure you have: Completed the Installation Guide A Django project with user authentication working At least one user account to test with Step 1: Create a Link to 2FA Settings Add a link to the Nova2FA settings page in your base template or user profile: <!-- base.html or profile.html --> {% if user.is_authenticated %} <nav> <a href=\"{% url 'nova2fa:settings' %}\">Security Settings</a> </nav> {% endif %} Step 2: Configure Nova2FA Add configuration to your settings.py : # Nova2FA Configuration NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Enable both methods NOVA2FA_TOTP_ISSUER = 'MyApp' # Your app name (shown in authenticator apps) NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 # User stays verified for 14 days NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 10 # Email codes expire after 10 minutes # Security (v1.1.0+) NOVA2FA_SECRET_KEY = 'your-secret-encryption-key' # Required for TOTP encryption NOVA2FA_MAX_ATTEMPTS = 5 # Account lockout after 5 failed attempts NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # 15 minute lockout duration !!! tip \"Generate Encryption Key\" Generate a secure key with: python from django.core.management.utils import get_random_secret_key print(get_random_secret_key()) Step 3: Test the Flow 3.1 Enable 2FA Start your development server: python manage.py runserver Log in to your Django application Navigate to /2fa/settings/ Click \"Enable Two-Factor Authentication\" 3.2 Choose Authentication Method Option A: Email OTP Select \"Email OTP\" Click \"Continue\" Check your email (or console if using console backend) Enter the 6-digit code Click \"Verify and Enable\" Save your backup codes! (v1.1.0: shown only once) Option B: Authenticator App (TOTP) Select \"Authenticator App\" Click \"Continue\" Scan the QR code with Google Authenticator or similar app Or manually enter the secret key shown Enter the 6-digit code from your app Click \"Verify and Enable\" Save your backup codes! (v1.1.0: shown only once) !!! warning \"Save Backup Codes (v1.1.0+)\" Backup codes are displayed only once for security. Save them in a secure location (password manager, printed copy in safe, etc.). You won't be able to view them again! 3.3 Test Verification Log out of your application Log back in with your username and password You'll be redirected to /2fa/verify/ Enter your 2FA code You'll be redirected to your intended destination Step 4: Understand What Happened When you enabled 2FA: # Nova2FA created a UserTwoFactorSettings record user_settings = UserTwoFactorSettings.objects.get(user=request.user) print(user_settings.is_enabled) # True print(user_settings.method) # 'email' or 'totp' print(user_settings.backup_codes) # List of 8 backup codes When you verified 2FA: # Nova2FA set a session variable request.session['nova2fa_verified_at'] = '2025-01-15T10:30:00' # And updated the database user_settings.last_verified = timezone.now() user_settings.save() The middleware now checks this on every request: # Simplified middleware logic if user.nova2fa_settings.is_enabled: if not is_verified_in_session(request): redirect_to_verification() Step 5: Customize the Experience 5.1 Override Templates Create templates/nova2fa/settings.html in your project: {% extends \"base.html\" %} {% block content %} <div class=\"container\"> <h1>Security Settings</h1> {% if two_factor_settings.is_enabled %} <div class=\"alert alert-success\">Two-Factor Authentication is enabled</div> <p>Method: {{ two_factor_settings.get_method_display }}</p> <a href=\"{% url 'nova2fa:disable' %}\" class=\"btn btn-danger\"> Disable 2FA </a> {% else %} <div class=\"alert alert-warning\"> Two-Factor Authentication is not enabled </div> <a href=\"{% url 'nova2fa:setup' %}\" class=\"btn btn-primary\"> Enable 2FA </a> {% endif %} </div> {% endblock %} 5.2 Add Custom Styling Create a custom base template at templates/nova2fa/base_2fa.html : {% extends \"base.html\" %} {% block content %} <div class=\"nova2fa-container\"> {% if messages %} <div class=\"messages\"> {% for message in messages %} <div class=\"alert alert-{{ message.tags }}\">{{ message }}</div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> {% endblock %} Step 6: Configure Path Protection By default, Nova2FA protects all authenticated pages . Customize this: # Protect specific paths only NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/profile/', '/settings/', ] # Exempt certain paths NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', ] # Exempt superusers (useful for emergency access) NOVA2FA_EXEMPT_SUPERUSERS = True Step 7: Test Backup Codes Enable 2FA (if not already enabled) Go to /2fa/settings/ Click \"View Backup Codes\" Save these codes somewhere safe Log out and log back in When prompted for 2FA, click \"Use a backup code instead\" Enter one of your backup codes You'll be logged in (and that code is now marked as used) Common Scenarios Scenario 1: User Lost Their Phone User logs in with username/password User clicks \"Use a backup code instead\" User enters a backup code User is logged in User can go to settings and switch to Email OTP User generates new backup codes Scenario 2: User Wants to Switch Methods User goes to /2fa/settings/ User clicks \"Change Method\" User selects new method User completes setup for new method Old method is replaced Scenario 3: User Wants to Disable 2FA User goes to /2fa/settings/ User clicks \"Disable 2FA\" User confirms by checking the box 2FA is disabled (can be re-enabled anytime) Next Steps Read the Configuration Reference for all available options Check the Customization Guide to style templates Learn about Custom Methods to add SMS, etc. Review Security Best Practices Troubleshooting 2FA Not Triggering Check your middleware order: MIDDLEWARE = [ # ... 'django.contrib.auth.middleware.AuthenticationMiddleware', 'nova2fa.middleware.Nova2FAMiddleware', # Must be after auth # ... ] Stuck in Verification Loop Clear your session and try again: python manage.py shell >>> from django.contrib.sessions.models import Session >>> Session.objects.all().delete() QR Code Not Showing Ensure Pillow is installed: pip install Pillow Email Not Sending Check Django's email configuration and test manually: python manage.py shell >>> from django.core.mail import send_mail >>> send_mail('Test', 'Message', 'from@example.com', ['to@example.com'])","title":"Quickstart"},{"location":"quickstart/#quick-start-tutorial","text":"This tutorial will guide you through setting up Nova2FA in a Django project and enabling your first 2FA authentication.","title":"Quick Start Tutorial"},{"location":"quickstart/#prerequisites","text":"Before starting, ensure you have: Completed the Installation Guide A Django project with user authentication working At least one user account to test with","title":"Prerequisites"},{"location":"quickstart/#step-1-create-a-link-to-2fa-settings","text":"Add a link to the Nova2FA settings page in your base template or user profile: <!-- base.html or profile.html --> {% if user.is_authenticated %} <nav> <a href=\"{% url 'nova2fa:settings' %}\">Security Settings</a> </nav> {% endif %}","title":"Step 1: Create a Link to 2FA Settings"},{"location":"quickstart/#step-2-configure-nova2fa","text":"Add configuration to your settings.py : # Nova2FA Configuration NOVA2FA_ENABLED_METHODS = ['email', 'totp'] # Enable both methods NOVA2FA_TOTP_ISSUER = 'MyApp' # Your app name (shown in authenticator apps) NOVA2FA_VERIFICATION_WINDOW_DAYS = 14 # User stays verified for 14 days NOVA2FA_EMAIL_OTP_EXPIRY_MINUTES = 10 # Email codes expire after 10 minutes # Security (v1.1.0+) NOVA2FA_SECRET_KEY = 'your-secret-encryption-key' # Required for TOTP encryption NOVA2FA_MAX_ATTEMPTS = 5 # Account lockout after 5 failed attempts NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # 15 minute lockout duration !!! tip \"Generate Encryption Key\" Generate a secure key with: python from django.core.management.utils import get_random_secret_key print(get_random_secret_key())","title":"Step 2: Configure Nova2FA"},{"location":"quickstart/#step-3-test-the-flow","text":"","title":"Step 3: Test the Flow"},{"location":"quickstart/#31-enable-2fa","text":"Start your development server: python manage.py runserver Log in to your Django application Navigate to /2fa/settings/ Click \"Enable Two-Factor Authentication\"","title":"3.1 Enable 2FA"},{"location":"quickstart/#32-choose-authentication-method","text":"Option A: Email OTP Select \"Email OTP\" Click \"Continue\" Check your email (or console if using console backend) Enter the 6-digit code Click \"Verify and Enable\" Save your backup codes! (v1.1.0: shown only once) Option B: Authenticator App (TOTP) Select \"Authenticator App\" Click \"Continue\" Scan the QR code with Google Authenticator or similar app Or manually enter the secret key shown Enter the 6-digit code from your app Click \"Verify and Enable\" Save your backup codes! (v1.1.0: shown only once) !!! warning \"Save Backup Codes (v1.1.0+)\" Backup codes are displayed only once for security. Save them in a secure location (password manager, printed copy in safe, etc.). You won't be able to view them again!","title":"3.2 Choose Authentication Method"},{"location":"quickstart/#33-test-verification","text":"Log out of your application Log back in with your username and password You'll be redirected to /2fa/verify/ Enter your 2FA code You'll be redirected to your intended destination","title":"3.3 Test Verification"},{"location":"quickstart/#step-4-understand-what-happened","text":"When you enabled 2FA: # Nova2FA created a UserTwoFactorSettings record user_settings = UserTwoFactorSettings.objects.get(user=request.user) print(user_settings.is_enabled) # True print(user_settings.method) # 'email' or 'totp' print(user_settings.backup_codes) # List of 8 backup codes When you verified 2FA: # Nova2FA set a session variable request.session['nova2fa_verified_at'] = '2025-01-15T10:30:00' # And updated the database user_settings.last_verified = timezone.now() user_settings.save() The middleware now checks this on every request: # Simplified middleware logic if user.nova2fa_settings.is_enabled: if not is_verified_in_session(request): redirect_to_verification()","title":"Step 4: Understand What Happened"},{"location":"quickstart/#step-5-customize-the-experience","text":"","title":"Step 5: Customize the Experience"},{"location":"quickstart/#51-override-templates","text":"Create templates/nova2fa/settings.html in your project: {% extends \"base.html\" %} {% block content %} <div class=\"container\"> <h1>Security Settings</h1> {% if two_factor_settings.is_enabled %} <div class=\"alert alert-success\">Two-Factor Authentication is enabled</div> <p>Method: {{ two_factor_settings.get_method_display }}</p> <a href=\"{% url 'nova2fa:disable' %}\" class=\"btn btn-danger\"> Disable 2FA </a> {% else %} <div class=\"alert alert-warning\"> Two-Factor Authentication is not enabled </div> <a href=\"{% url 'nova2fa:setup' %}\" class=\"btn btn-primary\"> Enable 2FA </a> {% endif %} </div> {% endblock %}","title":"5.1 Override Templates"},{"location":"quickstart/#52-add-custom-styling","text":"Create a custom base template at templates/nova2fa/base_2fa.html : {% extends \"base.html\" %} {% block content %} <div class=\"nova2fa-container\"> {% if messages %} <div class=\"messages\"> {% for message in messages %} <div class=\"alert alert-{{ message.tags }}\">{{ message }}</div> {% endfor %} </div> {% endif %} {% block nova2fa_content %}{% endblock %} </div> {% endblock %}","title":"5.2 Add Custom Styling"},{"location":"quickstart/#step-6-configure-path-protection","text":"By default, Nova2FA protects all authenticated pages . Customize this: # Protect specific paths only NOVA2FA_PROTECTED_PATHS = [ '/dashboard/', '/profile/', '/settings/', ] # Exempt certain paths NOVA2FA_EXEMPT_PATHS = [ '/api/public/', '/healthcheck/', ] # Exempt superusers (useful for emergency access) NOVA2FA_EXEMPT_SUPERUSERS = True","title":"Step 6: Configure Path Protection"},{"location":"quickstart/#step-7-test-backup-codes","text":"Enable 2FA (if not already enabled) Go to /2fa/settings/ Click \"View Backup Codes\" Save these codes somewhere safe Log out and log back in When prompted for 2FA, click \"Use a backup code instead\" Enter one of your backup codes You'll be logged in (and that code is now marked as used)","title":"Step 7: Test Backup Codes"},{"location":"quickstart/#common-scenarios","text":"","title":"Common Scenarios"},{"location":"quickstart/#scenario-1-user-lost-their-phone","text":"User logs in with username/password User clicks \"Use a backup code instead\" User enters a backup code User is logged in User can go to settings and switch to Email OTP User generates new backup codes","title":"Scenario 1: User Lost Their Phone"},{"location":"quickstart/#scenario-2-user-wants-to-switch-methods","text":"User goes to /2fa/settings/ User clicks \"Change Method\" User selects new method User completes setup for new method Old method is replaced","title":"Scenario 2: User Wants to Switch Methods"},{"location":"quickstart/#scenario-3-user-wants-to-disable-2fa","text":"User goes to /2fa/settings/ User clicks \"Disable 2FA\" User confirms by checking the box 2FA is disabled (can be re-enabled anytime)","title":"Scenario 3: User Wants to Disable 2FA"},{"location":"quickstart/#next-steps","text":"Read the Configuration Reference for all available options Check the Customization Guide to style templates Learn about Custom Methods to add SMS, etc. Review Security Best Practices","title":"Next Steps"},{"location":"quickstart/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"quickstart/#2fa-not-triggering","text":"Check your middleware order: MIDDLEWARE = [ # ... 'django.contrib.auth.middleware.AuthenticationMiddleware', 'nova2fa.middleware.Nova2FAMiddleware', # Must be after auth # ... ]","title":"2FA Not Triggering"},{"location":"quickstart/#stuck-in-verification-loop","text":"Clear your session and try again: python manage.py shell >>> from django.contrib.sessions.models import Session >>> Session.objects.all().delete()","title":"Stuck in Verification Loop"},{"location":"quickstart/#qr-code-not-showing","text":"Ensure Pillow is installed: pip install Pillow","title":"QR Code Not Showing"},{"location":"quickstart/#email-not-sending","text":"Check Django's email configuration and test manually: python manage.py shell >>> from django.core.mail import send_mail >>> send_mail('Test', 'Message', 'from@example.com', ['to@example.com'])","title":"Email Not Sending"},{"location":"security/","text":"Security Guide Nova2FA v1.1.0 implements enterprise-grade security features to protect user accounts. This guide explains the security architecture and best practices. Security Features \ud83d\udd10 Encryption at Rest TOTP Secrets are encrypted before storage using Fernet symmetric encryption (AES-128). How it works: User sets up TOTP with authenticator app Secret is generated and encrypted with NOVA2FA_SECRET_KEY Encrypted value stored in database (max 512 characters) Decrypted only during verification Configuration: # settings.py NOVA2FA_SECRET_KEY = 'your-secret-encryption-key' # Required for v1.1.0+ !!! tip \"Best Practice\" Use a dedicated encryption key separate from Django's SECRET_KEY . If NOVA2FA_SECRET_KEY is not set, it falls back to SECRET_KEY . \ud83d\udd12 Password Hashing Backup Codes are hashed using Django's password hashers (PBKDF2 by default). How it works: 8 backup codes generated during setup Each code hashed with make_password() Only hashed values stored in database Verification uses check_password() Used codes tracked separately Why this matters: Database breach doesn't expose usable codes Codes cannot be reversed or recovered Same security level as user passwords \ud83d\udee1\ufe0f Brute Force Protection Account Lockout prevents unlimited verification attempts. Default Settings: NOVA2FA_MAX_ATTEMPTS = 5 # Failed attempts before lockout NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # Lockout duration How it works: Failed verification increments failed_attempts counter After 5 failures, account locked for 15 minutes locked_until timestamp set Successful verification resets counter Lockout applies to all verification methods Lockout applies to: TOTP verification Email OTP verification Backup code verification \u23f1\ufe0f Rate Limiting Verification endpoints are rate-limited to prevent abuse. Implementation: Uses Django's cache framework Default: 10 attempts per 15 minutes per user Applied via @rate_limit decorator Works with account lockout for defense-in-depth \ud83d\udd11 One-Time Backup Code Display Backup codes shown only once after generation. Security benefits: Codes displayed immediately after generation Stored in session temporarily Removed after first view Forces users to save codes securely Prevents casual browsing of codes User flow: User enables 2FA or regenerates codes Codes displayed once with save prompt Codes removed from session Only count of available codes shown afterward Security Architecture Data Flow Diagram \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 User \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 TOTP Setup \u2502 \u2502 1. Generate secret (plain) \u2502 \u2502 2. Encrypt with NOVA2FA_SECRET_KEY \u2502 \u2502 3. Store encrypted in DB \u2502 \u2502 4. Show QR code (plain for scan) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 TOTP Verification \u2502 \u2502 1. Retrieve encrypted secret \u2502 \u2502 2. Decrypt with key \u2502 \u2502 3. Verify token \u2502 \u2502 4. Reset/increment failed attempts \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 Database Security Encrypted Fields: totp_secret (512 chars) - Fernet encrypted Hashed Fields: backup_codes (JSON array) - Django password hashes Tracking Fields: failed_attempts (integer) - Brute force counter locked_until (datetime) - Lockout expiration used_backup_codes (JSON array) - Hashed used codes Indexes: user_id - Unique constraint locked_until - Query optimization for lockout checks Threat Model Threats Mitigated \u2705 Database Breach TOTP secrets encrypted (unusable without key) Backup codes hashed (cannot be reversed) Email OTP codes expire quickly \u2705 Brute Force Attacks Account lockout after 5 attempts Rate limiting on endpoints Lockout duration prevents automated attacks \u2705 Credential Stuffing 2FA required even with valid password Multiple verification methods available Backup codes for account recovery \u2705 Session Hijacking Verification window limits session validity Re-verification required after timeout Middleware enforces verification Threats NOT Mitigated \u26a0\ufe0f Phishing Users can be tricked into providing TOTP codes Mitigation: User education, WebAuthn (future) \u26a0\ufe0f Malware on User Device Authenticator app can be compromised Mitigation: Device security, biometric locks \u26a0\ufe0f SIM Swapping (Email OTP) Email account takeover bypasses 2FA Mitigation: Use TOTP instead of Email OTP \u26a0\ufe0f Social Engineering Attackers may trick support into disabling 2FA Mitigation: Strict verification procedures Best Practices For Developers Use Dedicated Encryption Key python # Generate with: from django.core.management.utils import get_random_secret_key NOVA2FA_SECRET_KEY = get_random_secret_key() print(NOVA2FA_SECRET_KEY) # Store securely Secure Key Storage Use environment variables Never commit keys to version control Rotate keys periodically Use secrets management (AWS Secrets Manager, etc.) Configure HTTPS python # settings.py (production) SECURE_SSL_REDIRECT = True SESSION_COOKIE_SECURE = True CSRF_COOKIE_SECURE = True Monitor Failed Attempts ```python # Log lockouts for security monitoring from nova2fa.models import UserTwoFactorSettings locked_users = UserTwoFactorSettings.objects.filter( locked_until__gt=timezone.now() ) ``` Customize Lockout Settings python # Stricter for high-security apps NOVA2FA_MAX_ATTEMPTS = 3 NOVA2FA_LOCKOUT_DURATION_MINUTES = 30 For End Users Save Backup Codes Securely Print and store in safe place Use password manager Never share codes Regenerate if compromised Use Authenticator Apps Prefer TOTP over Email OTP Use apps like Google Authenticator, Authy Enable app lock/biometrics Protect Recovery Email Use strong password Enable 2FA on email account Monitor for suspicious activity Report Suspicious Activity Unexpected lockouts Unrecognized verification attempts Lost/stolen devices Compliance Considerations GDPR Data Minimization : Only stores necessary 2FA data Right to Erasure : Disable 2FA to remove data Data Portability : Export backup codes on generation Encryption : Personal data encrypted at rest SOC 2 Access Control : 2FA enforces authentication Audit Logging : Track verification attempts Encryption : Data encrypted in transit and at rest Availability : Backup codes ensure account access PCI DSS Multi-Factor Authentication : Requirement 8.3 Encryption : Requirement 3.4 (data at rest) Access Logging : Requirement 10.2 Account Lockout : Requirement 8.1.6 Security Checklist Before deploying to production: [ ] Set NOVA2FA_SECRET_KEY in environment variables [ ] Enable HTTPS with valid SSL certificate [ ] Configure secure cookie settings [ ] Set up monitoring for failed attempts [ ] Document backup code recovery process [ ] Train support staff on 2FA procedures [ ] Test account lockout behavior [ ] Verify encryption is working (check DB values) [ ] Set up backup/recovery procedures [ ] Review and customize lockout settings Incident Response Compromised Encryption Key Generate new NOVA2FA_SECRET_KEY Update environment variables Restart application Force all users to re-setup TOTP Notify users of security incident Mass Account Lockouts Check for DDoS/attack patterns Temporarily increase NOVA2FA_LOCKOUT_DURATION_MINUTES Implement IP-based rate limiting Consider temporary 2FA bypass for verified users Investigate root cause Database Breach Rotate NOVA2FA_SECRET_KEY immediately Force password resets for all users Force 2FA re-setup for all users Audit access logs Notify affected users Review and enhance security measures Future Enhancements Planned security features: SMS OTP as additional method Trusted devices (remember device) Admin notifications (suspicious activity alerts) IP whitelisting (restrict verification by location) References OWASP Authentication Cheat Sheet NIST Digital Identity Guidelines Django Security Documentation Fernet Specification Questions or concerns? Open an issue on GitHub or review the CHANGELOG .","title":"Security Guide"},{"location":"security/#security-guide","text":"Nova2FA v1.1.0 implements enterprise-grade security features to protect user accounts. This guide explains the security architecture and best practices.","title":"Security Guide"},{"location":"security/#security-features","text":"","title":"Security Features"},{"location":"security/#encryption-at-rest","text":"TOTP Secrets are encrypted before storage using Fernet symmetric encryption (AES-128). How it works: User sets up TOTP with authenticator app Secret is generated and encrypted with NOVA2FA_SECRET_KEY Encrypted value stored in database (max 512 characters) Decrypted only during verification Configuration: # settings.py NOVA2FA_SECRET_KEY = 'your-secret-encryption-key' # Required for v1.1.0+ !!! tip \"Best Practice\" Use a dedicated encryption key separate from Django's SECRET_KEY . If NOVA2FA_SECRET_KEY is not set, it falls back to SECRET_KEY .","title":"\ud83d\udd10 Encryption at Rest"},{"location":"security/#password-hashing","text":"Backup Codes are hashed using Django's password hashers (PBKDF2 by default). How it works: 8 backup codes generated during setup Each code hashed with make_password() Only hashed values stored in database Verification uses check_password() Used codes tracked separately Why this matters: Database breach doesn't expose usable codes Codes cannot be reversed or recovered Same security level as user passwords","title":"\ud83d\udd12 Password Hashing"},{"location":"security/#brute-force-protection","text":"Account Lockout prevents unlimited verification attempts. Default Settings: NOVA2FA_MAX_ATTEMPTS = 5 # Failed attempts before lockout NOVA2FA_LOCKOUT_DURATION_MINUTES = 15 # Lockout duration How it works: Failed verification increments failed_attempts counter After 5 failures, account locked for 15 minutes locked_until timestamp set Successful verification resets counter Lockout applies to all verification methods Lockout applies to: TOTP verification Email OTP verification Backup code verification","title":"\ud83d\udee1\ufe0f Brute Force Protection"},{"location":"security/#rate-limiting","text":"Verification endpoints are rate-limited to prevent abuse. Implementation: Uses Django's cache framework Default: 10 attempts per 15 minutes per user Applied via @rate_limit decorator Works with account lockout for defense-in-depth","title":"\u23f1\ufe0f Rate Limiting"},{"location":"security/#one-time-backup-code-display","text":"Backup codes shown only once after generation. Security benefits: Codes displayed immediately after generation Stored in session temporarily Removed after first view Forces users to save codes securely Prevents casual browsing of codes User flow: User enables 2FA or regenerates codes Codes displayed once with save prompt Codes removed from session Only count of available codes shown afterward","title":"\ud83d\udd11 One-Time Backup Code Display"},{"location":"security/#security-architecture","text":"","title":"Security Architecture"},{"location":"security/#data-flow-diagram","text":"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 User \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 TOTP Setup \u2502 \u2502 1. Generate secret (plain) \u2502 \u2502 2. Encrypt with NOVA2FA_SECRET_KEY \u2502 \u2502 3. Store encrypted in DB \u2502 \u2502 4. Show QR code (plain for scan) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 TOTP Verification \u2502 \u2502 1. Retrieve encrypted secret \u2502 \u2502 2. Decrypt with key \u2502 \u2502 3. Verify token \u2502 \u2502 4. Reset/increment failed attempts \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"Data Flow Diagram"},{"location":"security/#database-security","text":"Encrypted Fields: totp_secret (512 chars) - Fernet encrypted Hashed Fields: backup_codes (JSON array) - Django password hashes Tracking Fields: failed_attempts (integer) - Brute force counter locked_until (datetime) - Lockout expiration used_backup_codes (JSON array) - Hashed used codes Indexes: user_id - Unique constraint locked_until - Query optimization for lockout checks","title":"Database Security"},{"location":"security/#threat-model","text":"","title":"Threat Model"},{"location":"security/#threats-mitigated","text":"\u2705 Database Breach TOTP secrets encrypted (unusable without key) Backup codes hashed (cannot be reversed) Email OTP codes expire quickly \u2705 Brute Force Attacks Account lockout after 5 attempts Rate limiting on endpoints Lockout duration prevents automated attacks \u2705 Credential Stuffing 2FA required even with valid password Multiple verification methods available Backup codes for account recovery \u2705 Session Hijacking Verification window limits session validity Re-verification required after timeout Middleware enforces verification","title":"Threats Mitigated"},{"location":"security/#threats-not-mitigated","text":"\u26a0\ufe0f Phishing Users can be tricked into providing TOTP codes Mitigation: User education, WebAuthn (future) \u26a0\ufe0f Malware on User Device Authenticator app can be compromised Mitigation: Device security, biometric locks \u26a0\ufe0f SIM Swapping (Email OTP) Email account takeover bypasses 2FA Mitigation: Use TOTP instead of Email OTP \u26a0\ufe0f Social Engineering Attackers may trick support into disabling 2FA Mitigation: Strict verification procedures","title":"Threats NOT Mitigated"},{"location":"security/#best-practices","text":"","title":"Best Practices"},{"location":"security/#for-developers","text":"Use Dedicated Encryption Key python # Generate with: from django.core.management.utils import get_random_secret_key NOVA2FA_SECRET_KEY = get_random_secret_key() print(NOVA2FA_SECRET_KEY) # Store securely Secure Key Storage Use environment variables Never commit keys to version control Rotate keys periodically Use secrets management (AWS Secrets Manager, etc.) Configure HTTPS python # settings.py (production) SECURE_SSL_REDIRECT = True SESSION_COOKIE_SECURE = True CSRF_COOKIE_SECURE = True Monitor Failed Attempts ```python # Log lockouts for security monitoring from nova2fa.models import UserTwoFactorSettings locked_users = UserTwoFactorSettings.objects.filter( locked_until__gt=timezone.now() ) ``` Customize Lockout Settings python # Stricter for high-security apps NOVA2FA_MAX_ATTEMPTS = 3 NOVA2FA_LOCKOUT_DURATION_MINUTES = 30","title":"For Developers"},{"location":"security/#for-end-users","text":"Save Backup Codes Securely Print and store in safe place Use password manager Never share codes Regenerate if compromised Use Authenticator Apps Prefer TOTP over Email OTP Use apps like Google Authenticator, Authy Enable app lock/biometrics Protect Recovery Email Use strong password Enable 2FA on email account Monitor for suspicious activity Report Suspicious Activity Unexpected lockouts Unrecognized verification attempts Lost/stolen devices","title":"For End Users"},{"location":"security/#compliance-considerations","text":"","title":"Compliance Considerations"},{"location":"security/#gdpr","text":"Data Minimization : Only stores necessary 2FA data Right to Erasure : Disable 2FA to remove data Data Portability : Export backup codes on generation Encryption : Personal data encrypted at rest","title":"GDPR"},{"location":"security/#soc-2","text":"Access Control : 2FA enforces authentication Audit Logging : Track verification attempts Encryption : Data encrypted in transit and at rest Availability : Backup codes ensure account access","title":"SOC 2"},{"location":"security/#pci-dss","text":"Multi-Factor Authentication : Requirement 8.3 Encryption : Requirement 3.4 (data at rest) Access Logging : Requirement 10.2 Account Lockout : Requirement 8.1.6","title":"PCI DSS"},{"location":"security/#security-checklist","text":"Before deploying to production: [ ] Set NOVA2FA_SECRET_KEY in environment variables [ ] Enable HTTPS with valid SSL certificate [ ] Configure secure cookie settings [ ] Set up monitoring for failed attempts [ ] Document backup code recovery process [ ] Train support staff on 2FA procedures [ ] Test account lockout behavior [ ] Verify encryption is working (check DB values) [ ] Set up backup/recovery procedures [ ] Review and customize lockout settings","title":"Security Checklist"},{"location":"security/#incident-response","text":"","title":"Incident Response"},{"location":"security/#compromised-encryption-key","text":"Generate new NOVA2FA_SECRET_KEY Update environment variables Restart application Force all users to re-setup TOTP Notify users of security incident","title":"Compromised Encryption Key"},{"location":"security/#mass-account-lockouts","text":"Check for DDoS/attack patterns Temporarily increase NOVA2FA_LOCKOUT_DURATION_MINUTES Implement IP-based rate limiting Consider temporary 2FA bypass for verified users Investigate root cause","title":"Mass Account Lockouts"},{"location":"security/#database-breach","text":"Rotate NOVA2FA_SECRET_KEY immediately Force password resets for all users Force 2FA re-setup for all users Audit access logs Notify affected users Review and enhance security measures","title":"Database Breach"},{"location":"security/#future-enhancements","text":"Planned security features: SMS OTP as additional method Trusted devices (remember device) Admin notifications (suspicious activity alerts) IP whitelisting (restrict verification by location)","title":"Future Enhancements"},{"location":"security/#references","text":"OWASP Authentication Cheat Sheet NIST Digital Identity Guidelines Django Security Documentation Fernet Specification Questions or concerns? Open an issue on GitHub or review the CHANGELOG .","title":"References"}]}